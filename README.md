<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# terraform-azure-avm-containerregistry-containerregistry-azapi-replicator

This Azure Verified Module (AVM) utility module provides a migration path from `azurerm_container_registry` resource to the generic `azapi_resource` provider. It acts as a replicator that accepts the same input variables as the AzureRM provider and outputs the necessary configurations for AzAPI resource deployment.

## Purpose

This module is designed to:
- **Facilitate migration** from AzureRM provider to AzAPI provider for subnet resources
- **Maintain compatibility** with existing `azurerm_container_registry` configurations
- **Generate AzAPI outputs** including resource headers, body, locks, and sensitive data

## Key Features

- ✅ **Full feature parity** with `azurerm_container_registry` resource
- ✅ **Schema validation disabled** to support all Azure API fields including read-only properties
- ✅ **Automatic state migration** support via output configurations
- ✅ **Comprehensive validation** for input parameters
- ✅ **Telemetry support** (opt-in/opt-out)
- ✅ **Lock management** for safe concurrent operations

<!-- markdownlint-disable MD033 -->
## Requirements

The following requirements are needed by this module:

- <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) (>= 1.9, < 2.0)

- <a name="requirement_azapi"></a> [azapi](#requirement\_azapi) (~> 2.4)

- <a name="requirement_modtm"></a> [modtm](#requirement\_modtm) (~> 0.3)

- <a name="requirement_random"></a> [random](#requirement\_random) (~> 3.5)

## Resources

The following resources are used by this module:

- [modtm_telemetry.telemetry](https://registry.terraform.io/providers/azure/modtm/latest/docs/resources/telemetry) (resource)
- [random_uuid.telemetry](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/uuid) (resource)
- [azapi_client_config.telemetry](https://registry.terraform.io/providers/Azure/azapi/latest/docs/data-sources/client_config) (data source)
- [modtm_module_source.telemetry](https://registry.terraform.io/providers/azure/modtm/latest/docs/data-sources/module_source) (data source)

<!-- markdownlint-disable MD013 -->
## Required Inputs

The following input variables are required:

### <a name="input_location"></a> [location](#input\_location)

Description: (Required) Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.

Type: `string`

### <a name="input_name"></a> [name](#input\_name)

Description: (Required) Specifies the name of the Container Registry. Only Alphanumeric characters allowed. Changing this forces a new resource to be created.

Type: `string`

### <a name="input_resource_group_id"></a> [resource\_group\_id](#input\_resource\_group\_id)

Description: (Required) The resource ID of the resource group in which to create the Container Registry. Changing this forces a new resource to be created.

Type: `string`

### <a name="input_sku"></a> [sku](#input\_sku)

Description: (Required) The SKU name of the container registry. Possible values are `Basic`, `Standard` and `Premium`.

Type: `string`

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_admin_enabled"></a> [admin\_enabled](#input\_admin\_enabled)

Description: (Optional) Specifies whether the admin user is enabled. Defaults to `false`.

Type: `bool`

Default: `false`

### <a name="input_anonymous_pull_enabled"></a> [anonymous\_pull\_enabled](#input\_anonymous\_pull\_enabled)

Description: (Optional) Whether to allow anonymous (unauthenticated) pull access to this Container Registry. This is only supported on resources with the `Standard` or `Premium` SKU.

Type: `bool`

Default: `null`

### <a name="input_data_endpoint_enabled"></a> [data\_endpoint\_enabled](#input\_data\_endpoint\_enabled)

Description: (Optional) Whether to enable dedicated data endpoints for this Container Registry? This is only supported on resources with the `Premium` SKU.

Type: `bool`

Default: `null`

### <a name="input_enable_telemetry"></a> [enable\_telemetry](#input\_enable\_telemetry)

Description: This variable controls whether or not telemetry is enabled for the module.  
For more information see <https://aka.ms/avm/telemetryinfo>.  
If it is set to false, then no telemetry will be collected.

Type: `bool`

Default: `true`

### <a name="input_encryption"></a> [encryption](#input\_encryption)

Description: - `identity_client_id` - (Required) The client ID of the managed identity associated with the encryption key.
- `key_vault_key_id` - (Required) The ID of the Key Vault Key.

Type:

```hcl
list(object({
    identity_client_id = string
    key_vault_key_id   = string
  }))
```

Default: `null`

### <a name="input_export_policy_enabled"></a> [export\_policy\_enabled](#input\_export\_policy\_enabled)

Description: (Optional) Boolean value that indicates whether export policy is enabled. Defaults to `true`. In order to set it to `false`, make sure the `public_network_access_enabled` is also set to `false`.

Type: `bool`

Default: `true`

### <a name="input_georeplications"></a> [georeplications](#input\_georeplications)

Description: - `location` - (Required) A location where the container registry should be geo-replicated.
- `regional_endpoint_enabled` - (Optional) Whether regional endpoint is enabled for this Container Registry?
- `tags` - (Optional) A mapping of tags to assign to this replication location.
- `zone_redundancy_enabled` - (Optional) Whether zone redundancy is enabled for this replication location? Defaults to `false`.

Type:

```hcl
list(object({
    location                  = string
    regional_endpoint_enabled = optional(bool)
    tags                      = optional(map(string))
    zone_redundancy_enabled   = optional(bool)
  }))
```

Default: `null`

### <a name="input_identity"></a> [identity](#input\_identity)

Description: - `identity_ids` - (Optional) Specifies a list of User Assigned Managed Identity IDs to be assigned to this Container Registry.
- `type` - (Required) Specifies the type of Managed Service Identity that should be configured on this Container Registry. Possible values are `SystemAssigned`, `UserAssigned`, `SystemAssigned, UserAssigned` (to enable both).

Type:

```hcl
object({
    identity_ids = optional(set(string))
    type         = string
  })
```

Default: `null`

### <a name="input_network_rule_bypass_option"></a> [network\_rule\_bypass\_option](#input\_network\_rule\_bypass\_option)

Description: (Optional) Whether to allow trusted Azure services to access a network-restricted Container Registry? Possible values are `None` and `AzureServices`. Defaults to `AzureServices`.

Type: `string`

Default: `"AzureServices"`

### <a name="input_network_rule_set"></a> [network\_rule\_set](#input\_network\_rule\_set)

Description: - `default_action` - (Optional) The behaviour for requests matching no rules. Either `Allow` or `Deny`. Defaults to `Allow`

---
`ip_rule` block supports the following:
- `action` - (Required) The behaviour for requests matching this rule. At this time the only supported value is `Allow`
- `ip_range` - (Required) The CIDR block from which requests will match the rule.

Type:

```hcl
list(object({
    default_action = optional(string, "Allow")
    ip_rule = set(object({
      action   = string
      ip_range = string
    }))
  }))
```

Default: `null`

### <a name="input_public_network_access_enabled"></a> [public\_network\_access\_enabled](#input\_public\_network\_access\_enabled)

Description: (Optional) Whether public network access is allowed for the container registry. Defaults to `true`.

Type: `bool`

Default: `true`

### <a name="input_quarantine_policy_enabled"></a> [quarantine\_policy\_enabled](#input\_quarantine\_policy\_enabled)

Description: (Optional) Boolean value that indicates whether quarantine policy is enabled.

Type: `bool`

Default: `null`

### <a name="input_retention_policy_in_days"></a> [retention\_policy\_in\_days](#input\_retention\_policy\_in\_days)

Description: (Optional) The number of days to retain and untagged manifest after which it gets purged.

Type: `number`

Default: `null`

### <a name="input_tags"></a> [tags](#input\_tags)

Description: (Optional) A mapping of tags to assign to the resource.

Type: `map(string)`

Default: `null`

### <a name="input_timeouts"></a> [timeouts](#input\_timeouts)

Description: - `create` - (Optional) Specifies the timeout for create operations. Defaults to 30 minutes.
- `delete` - (Optional) Specifies the timeout for delete operations. Defaults to 30 minutes.
- `read` - (Optional) Specifies the timeout for read operations. Defaults to 5 minutes.
- `update` - (Optional) Specifies the timeout for update operations. Defaults to 30 minutes.

Type:

```hcl
object({
    create = optional(string, "30m")
    delete = optional(string, "30m")
    read   = optional(string, "5m")
    update = optional(string, "30m")
  })
```

Default:

```json
{
  "create": "30m",
  "delete": "30m",
  "read": "5m",
  "update": "30m"
}
```

### <a name="input_trust_policy_enabled"></a> [trust\_policy\_enabled](#input\_trust\_policy\_enabled)

Description: (Optional) Boolean value that indicated whether trust policy is enabled. Defaults to `false`.

Type: `bool`

Default: `false`

### <a name="input_zone_redundancy_enabled"></a> [zone\_redundancy\_enabled](#input\_zone\_redundancy\_enabled)

Description: (Optional) Whether zone redundancy is enabled for this Container Registry? Changing this forces a new resource to be created. Defaults to `false`.

Type: `bool`

Default: `false`

## Outputs

The following outputs are exported:

### <a name="output_azapi_header"></a> [azapi\_header](#output\_azapi\_header)

Description: n/a

### <a name="output_body"></a> [body](#output\_body)

Description: n/a

### <a name="output_locks"></a> [locks](#output\_locks)

Description: n/a

### <a name="output_post_creation0"></a> [post\_creation0](#output\_post\_creation0)

Description: Post-operation outputs

### <a name="output_post_creation0_sensitive_body"></a> [post\_creation0\_sensitive\_body](#output\_post\_creation0\_sensitive\_body)

Description: n/a

### <a name="output_replace_triggers_external_values"></a> [replace\_triggers\_external\_values](#output\_replace\_triggers\_external\_values)

Description: n/a

### <a name="output_retry"></a> [retry](#output\_retry)

Description: n/a

### <a name="output_sensitive_body"></a> [sensitive\_body](#output\_sensitive\_body)

Description: n/a

### <a name="output_sensitive_body_version"></a> [sensitive\_body\_version](#output\_sensitive\_body\_version)

Description: n/a

### <a name="output_timeouts"></a> [timeouts](#output\_timeouts)

Description: n/a

## Modules

No modules.

<!-- markdownlint-disable-next-line MD041 -->
## Data Collection

The software may collect information about you and your use of the software and send it to Microsoft. Microsoft may use this information to provide services and improve our products and services. You may turn off the telemetry as described in the repository. There are also some features in the software that may enable you and Microsoft to collect data from users of your applications. If you use these features, you must comply with applicable law, including providing appropriate notices to users of your applications together with a copy of Microsoft’s privacy statement. Our privacy statement is located at <https://go.microsoft.com/fwlink/?LinkID=824704>. You can learn more about data collection and use in the help documentation and our privacy statement. Your use of the software operates as your consent to these practices.
<!-- END_TF_DOCS -->